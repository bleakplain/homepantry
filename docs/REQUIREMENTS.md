# 家常味库 (HomePantry) - 产品需求文档 (PRD)

**版本：** 2.0
**创建日期：** 2025-01-31
**最后更新：** 2025-01-31

---

## 📋 文档目录

1. [产品愿景](#产品愿景)
2. [目标用户](#目标用户)
3. [用户场景](#用户场景)
4. [功能需求](#功能需求)
5. [非功能需求](#非功能需求)
6. [UI/UX 设计规范](#uiux-设计规范)
7. [数据模型](#数据模型)
8. [功能优先级](#功能优先级)
9. [技术架构](#技术架构)
10. [成功指标](#成功指标)

---

## 🎯 产品愿景

**让每一个热爱做饭的人，都能轻松管理自己的私房菜谱，从容规划每日餐食**

这不是一个复杂的烹饪社交平台，而是一个安静、贴心、极简的个人工具。它就像你厨房里那个永远整洁的食谱架，随时待命，从不打扰。

### 核心价值主张

| 用户痛点 | 解决方案 |
|----------|----------|
| 每天纠结"今天吃什么" | 智能推荐，30秒决定 |
| 菜谱散落在各处 | 统一管理，快速保存 |
| 购物清单手写麻烦 | 自动生成，智能合并 |
| 做菜时手忙脚乱 | 语音指导，步骤清晰 |
| 记不住改良心得 | 版本记录，笔记收藏 |

---

## 👥 目标用户

### 用户画像

#### 画像一：精致生活追求者小李

**基本信息**
- 年龄：28岁，单身，住在一居室公寓
- 职业：设计师，工作忙碌但注重生活品质
- 收入：月薪 15K，有消费能力

**行为特征**
- 周末会花时间研究新菜谱，平时做快手菜
- 喜欢拍照记录自己的作品
- 对厨具、食材有一定要求
- 关注美食博主，收藏了很多菜谱

**核心需求**
- 界面干净漂亮，用起来心情好
- 能快速记录和找到自己的菜谱
- 帮我推荐今天该做什么

**使用频率**
- 高频：每天查看推荐（晚上8点）
- 中频：周末规划下周菜单
- 低频：添加新菜谱（每周1-2次）

---

#### 画像二：家庭料理主理人王阿姨

**基本信息**
- 年龄：42岁，有两个孩子（12岁和8岁）
- 职业：全职妈妈，负责全家三餐
- 教育程度：大专

**行为特征**
- 每天要花2-3小时准备三餐
- 需要考虑家人的口味和营养
- 每周要去超市大采购2-3次
- 有一些拿手菜，但需要记录

**核心需求**
- 能帮我规划一周的菜单，不要重复
- 根据菜单自动生成购物清单
- 记录家人的口味偏好和忌口
- 操作简单，不要复杂的功能

**使用频率**
- 高频：每天规划三餐
- 中频：每周生成购物清单
- 低频：查找特定菜谱

---

#### 画像三：烹饪爱好者张哥

**基本信息**
- 年龄：35岁，已婚，喜欢招待朋友
- 职业：IT工程师，逻辑性强，喜欢研究
- 收入：月薪 25K+

**行为特征**
- 收藏各种菜谱，喜欢改良创新
- 经常在家请客，需要准备多道菜
- 对烹饪技巧和食材搭配很讲究
- 有记录和总结的习惯

**核心需求**
- 系统地管理所有菜谱，方便查找
- 做菜时能一步步指导我
- 可以记录每次的改良心得
- 帮我规划宴请菜单

**使用频率**
- 高频：周末请客前规划
- 中频：记录改良心得
- 低频：浏览收藏的菜谱

---

## 🎬 用户场景

### 场景1：快速保存新发现的菜谱

**触发条件**
用户在社交媒体/美食网站看到想做的菜谱

**用户目标**
快速保存菜谱，不中断浏览体验

**当前痛点**
- 保存流程太复杂，要填很多信息
- 必须上传照片
- 保存后要跳转页面

**解决方案**

#### 快速保存流程
```
1. 分享链接到 App / 或粘贴链接
   ↓
2. App 自动识别菜谱名称和主要食材（AI 解析）
   ↓
3. 用户确认信息
   - 菜名：自动识别，可编辑
   - 分类：快速选择（家常菜/快手菜/硬菜/汤品）
   - 标签：快速选择（30分钟内/简单/下饭）
   ↓
4. 点击保存，全程不超过30秒
```

#### 最小信息录入
- 必填：菜名
- 选填：分类、标签、备注
- 可延后：食材、步骤、照片

#### 智能识别能力
| 输入来源 | 识别内容 |
|----------|----------|
| 小红书分享 | 菜名、主要食材、步骤 |
| 美食博客链接 | 菜名、食材列表、烹饪时间 |
| 上传截图 | OCR 识别菜名、食材 |
| 粘贴文本 | 智能解析结构化信息 |

---

### 场景2：每天决定吃什么

**触发条件**
- 每天晚上8点思考明天吃什么
- 打开冰箱不知道能做什么

**用户目标**
30秒内决定明天的菜单

**解决方案**

#### 智能首页设计
```
┌─────────────────────────────────────┐
│  晚上好，小李 👋                    │
│  今天想吃点什么？                    │
├─────────────────────────────────────┤
│                                     │
│  🍽 今日推荐（3个选项）             │
│  ┌──────────┐ ┌──────────┐ ┌───────┐│
│  │番茄炒蛋  │ │麻婆豆腐  │ │清蒸鱼 ││
│  │15分钟    │ │25分钟    │ │20分钟 ││
│  │⭐4.8     │ │⭐4.5     │ │⭐4.9  ││
│  └──────────┘ └──────────┘ └───────┘│
│                                     │
│  ⏱ 快速筛选                         │
│  [30分钟内] [用现有食材] [清淡]     │
│                                     │
│  💡 温馨提示                         │
│  昨天吃了肉类，今天推荐点蔬菜吧      │
└─────────────────────────────────────┘
```

#### 推荐算法考虑因素

**个性化因素**
- 用户口味偏好（辣度、菜系）
- 历史评分和制作次数
- 家人喜好和忌口
- 选择的标签（快手/简单/下饭）

**情境因素**
- 时间：工作日推荐快手菜，周末可推荐复杂菜品
- 季节：夏天推荐凉菜，冬天推荐热汤
- 营养：昨天吃肉，今天推荐蔬菜
- 食材：优先推荐现有食材可做的菜

**随机因素**
- 每天推荐略有不同，避免总是重复

---

### 场景3：周末批量规划一周菜单

**触发条件**
周日下午规划下周工作日午餐

**用户目标**
一次性生成下周菜单，可微调

**解决方案**

#### 智能菜单生成流程
```
1. 选择时间范围
   - 下周工作日 / 下周全周 / 自定义日期

2. 设定条件
   - 餐次：午餐 / 晚餐 / 全天
   - 时间限制：30分钟内 / 1小时内 / 不限
   - 特殊需求：适合带饭 / 营养均衡 / 荤素搭配

3. AI 生成 2-3 套方案
   ┌─────────────────────────────────┐
   │ 方案一：家常快手                │
   │ 周一：番茄炒蛋 + 紫菜汤         │
   │ 周二：青椒肉丝 + 冬瓜汤         │
   │ 周三：宫保鸡丁 + 青菜汤         │
   │ ...                             │
   │                                 │
   │ 方案二：营养均衡                │
   │ 周一：清蒸鱼 + 凉拌菜           │
   │ 周二：番茄牛腩 + 菠菜汤         │
   │ ...                             │
   └─────────────────────────────────┘

4. 微调确认
   - 点击某天的菜可替换
   - 查看完整菜谱
   - 一键保存
```

#### 智能提醒

**营养提醒**
```
"本周蔬菜偏少，建议增加绿叶菜"
"周一和周三都有鸡肉，建议调整？"
"连续三天都是重口味，今天来点清淡的"
```

**特殊日期提醒**
```
"下周四是冬至，是否考虑特殊安排？"
"下周三是孩子生日，要不要准备点特别的？"
```

---

### 场景4：厨房烹饪模式

**触发条件**
用户开始做菜，需要步骤指导

**用户目标**
- 手上有油/湿，不方便操作手机
- 担心忘记下一步
- 需要计时提醒

**解决方案**

#### 烹饪模式设计

**横屏大字模式**
```
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
                               步骤 3/8

                          加入切好的青椒
                          中火翻炒 2 分钟

                      ▶ 语音播报中...

                          ⏱ 剩余：1分23秒

━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
     [上一步]      [暂停]      [下一步]
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
```

**交互方式**
| 操作 | 方式 |
|------|------|
| 切换步骤 | 手背轻滑屏幕 / 音量键 |
| 暂停/播放 | 点击屏幕中央 |
| 设置计时 | 点击时间文字 |
| 退出烹饪 | 返回手势 |

**语音播报**
- 自动播报下一步操作
- 关键提醒："注意：盐要最后放"
- 计时结束语音提醒
- 支持语速调节

**手势操作**
- 整个屏幕可滑动，不限于按钮
- 支持隔空手势（前置摄像头检测）
- 语音控制："下一步"、"暂停"、"两分钟计时"

---

### 场景5：自动生成购物清单

**触发条件**
规划好菜单后，准备去超市

**用户目标**
- 自动汇总所需食材
- 标记家中已有的
- 按超市区域分类

**解决方案**

#### 智能购物清单

**自动汇总**
```
根据下周菜单（5天午餐）自动生成：

🥬 蔬菜区
☐ 青椒 3个
  └─ 周一宫保鸡丁(2个) + 周四青椒肉丝(1个)
☐ 番茄 2个
  └─ 周二番茄炒蛋
☐ 小白菜 1把
☐ 冬瓜 500g

🥩 肉类区
☐ 鸡胸肉 300g
☐ 猪里脊 200g

🧂 调料区
☐ 豆瓣酱 1瓶
☐ 生抽 （检查家中剩余）
```

**智能功能**
- 自动合并：同种食材汇总数量
- 智能推算：根据菜单和份量计算
- 已有标记：勾选家中已有食材
- 分类排序：按超市区域排序
- 补充添加：添加非食材物品

**购物时**
- 点击勾选已购买
- 支持添加临时物品
- 可记录价格，下次参考

---

### 场景6：宴请菜单规划

**触发条件**
周末要请4个朋友吃饭

**用户目标**
- 规划4道菜的菜单
- 合理安排制作时间
- 避免手忙脚乱

**解决方案**

#### 宴请模式

**菜单建议**
```
请客场景：4-6人
推荐组合：
- 前菜：凉菜（可提前准备）
- 主菜：2-3道（1道硬菜 + 1-2道配菜）
- 汤：1道
- 主食：米饭/面食

食材搭配建议：
- 避免重复主材
- 荤素搭配
- 颜色丰富
- 口味层次
```

**时间规划**
```
朋友 19:00 到达，倒推时间表：

18:45 ▶ 热最后一个菜
       └─ 提醒：客人快到了

18:30 ▶ 开始做主菜
       └─ 并行：汤可以转小火了

18:15 ▶ 准备配菜
       └─ 提醒：现在开始切配菜

18:00 ▶ 开始炖汤

17:30 ▶ 腌制肉类

17:00 ▶ 准备凉菜（可提前）
```

**并行提醒**
- 不同菜品用不同颜色标记
- 显示当前需要关注的任务
- 倒计时显示

**协作功能**
- 分享进度给家人/朋友
- 其他人可以看到当前步骤
- 可以分配任务

---

### 场景7：记录改良心得

**触发条件**
做菜时有改进想法/做完后有感想

**用户目标**
- 记录这次的变化
- 评价这次的效果
- 对比历史版本

**解决方案**

#### 菜谱版本记录

**每次制作的记录**
```
红烧肉 (第5次制作)

⭐⭐⭐⭐⭐ 2025.01.30
📝 这次加了橙子皮，味道更清香！
   糖色炒得正好，颜色很漂亮
   📷 [上传成品图]

⭐⭐⭐⭐☆ 2025.01.15
📝 糖放多了，有点甜，下次减半
   火候掌握得不错

⭐⭐⭐⭐☆ 2024.12.28
📝 第一次做，还不错
   按照菜谱做的，很成功
```

**快速记录**
- 做完后弹出：今天这道菜怎么样？
- 星级评分
- 快速标签：成功/一般/失败
- 语音输入笔记
- 一键拍照

**版本对比**
- 查看历次记录
- 高亮显示变化
- 最佳版本提醒

---

### 场景8：食材库存管理

**触发条件**
想知道家里还有什么菜

**用户目标**
- 查看现有食材
- 了解保质期
- 获得烹饪建议

**解决方案**

#### 食材库存界面

**库存概览**
```
🏠 我的厨房

🥬 蔬菜类 (3件临期)
  🟠 胡萝卜 3根 ━━━ 3天后到期
  🟠 青椒 2个 ━━━ 2天后到期
  🟡 白菜 半颗 ━━━ 5天后到期

🥩 肉类 (冷冻)
  🔵 鸡胸肉 2块 ━━━ 充足
  🔵 猪里脊 300g ━━━ 充足

🧂 调料 (充足)
  ✅ 生抽
  ✅ 盐
  ⚠️ 老抽 (剩余不多)
```

**智能建议**
```
💡 你有这些食材，可以做：
  - 番茄炒蛋 ⭐4.8 (现有：番茄、鸡蛋)
  - 青椒肉丝 ⭐4.5 (现有：青椒、猪肉)

⚠️ 这些食材快过期了：
  - 青椒 (2天) - 建议做宫保鸡丁
  - 胡萝卜 (3天) - 建议做炒三丝
```

**操作功能**
- 扫码添加食材
- 手动录入
- 设置保质期
- 购物时快速核对

---

## ✅ 功能需求

### 功能模块总览

```
家常味库
├── 菜谱管理
│   ├── 快速保存
│   ├── 完整录入
│   ├── 编辑删除
│   ├── 搜索筛选
│   ├── 收藏分类
│   └── 版本记录
│
├── 智能推荐
│   ├── 今日推荐
│   ├── 食材推荐
│   ├── 季节推荐
│   ├── 营养建议
│   └── 个性化学习
│
├── 菜单规划
│   ├── 每日菜单
│   ├── 周菜单生成
│   ├── 宴请模式
│   └── 营养分析
│
├── 购物清单
│   ├── 自动生成
│   ├── 智能合并
│   ├── 分类整理
│   └── 价格记录
│
├── 烹饪模式
│   ├── 横屏大字
│   ├── 语音播报
│   ├── 手势操作
│   ├── 计时器
│   └── 多菜并行
│
├── 食材库存
│   ├── 库存管理
│   ├── 保质期提醒
│   ├── 智能建议
│   └── 扫码添加
│
└── 个人中心
    ├── 口味偏好
    ├── 家庭信息
    ├── 数据统计
    └── 设置管理
```

---

### 1. 菜谱管理

#### 1.1 快速保存菜谱

**功能描述**
支持从多种来源快速保存菜谱，最小化用户输入

**输入来源**
| 来源 | 处理方式 |
|------|----------|
| 分享链接 | AI 解析内容，自动填充 |
| 上传截图 | OCR 识别菜名、食材 |
| 粘贴文本 | 智能解析结构化信息 |
| 手动输入 | 提供模板和联想 |

**最小化录入**
- 必填：菜名
- 快速选：分类（1次点击）、标签（多选）
- 可延后：食材、步骤、照片
- 默认值：难度=中等、时间=30分钟

**交互流程**
```
分享链接 → App识别 → 确认信息 → 选择分类 → 保存
（目标：30秒内完成）
```

#### 1.2 完整录入菜谱

**功能描述**
完整的菜谱编辑器，支持详细记录

**录入项**
```
基本信息
├── 菜名 *（必填）
├── 分类 *（必选）
├── 描述
├── 图片（最多9张）
├── 烹饪时间 *（拖动选择）
├── 份量 *（拖动选择）
├── 难度 *（1-5星）
└── 标签（多选）

食材清单
├── 食材名称 *（联想输入）
├── 用量 *（数字+单位）
└── 备注（可选，如"去蒂切块"）
  └── 支持批量导入、从其他菜谱复制

制作步骤
├── 步骤描述 *（支持分段）
├── 每步配图（可选）
├── 步骤内计时（如"翻炒2分钟"）
└── 关键提醒（如"注意火候"）

其他信息
├── 小贴士
├── 失败原因记录
├── 改良建议
└── 营养信息（可选）
```

**辅助功能**
- 食材联想（常用食材优先）
- 步骤模板（如"腌制XX分钟"）
- 语音输入
- 图片裁剪和滤镜
- 从模板菜谱创建

#### 1.3 搜索和筛选

**功能描述**
强大的搜索和筛选功能，快速找到目标菜谱

**搜索方式**
```
文本搜索
├── 菜名搜索
├── 食材搜索（"用鸡肉"）
├── 描述搜索
└── 自然语言（"清淡的汤"、"快手菜"）

智能筛选
├── 时间：15分钟内/30分钟内/1小时内/不限
├── 难度：简单/中等/困难
├── 口味：清淡/微辣/中辣/重口味
├── 食材：现有食材/需购买
├── 分类：我的分类
└── 标签：我的标签

智能排序
├── 最常做
├── 评分最高
├── 最近添加
├── 烹饪时间
└── 字母顺序
```

**搜索体验**
- 实时搜索结果
- 搜索历史
- 热门搜索
- 拼音/英文搜索支持

#### 1.4 菜谱详情

**功能描述**
完整的菜谱信息展示

**信息展示**
```
顶部
├── 成品图（可滑动查看多图）
├── 菜名
├── 评分和制作次数
├── 基本信息标签
│   ├── ⏱ 烹饪时间
│   ├── 👥 份量
│   ├── 📊 难度
│   └── 🏷 分类/标签
└── 操作按钮
    ├── 加入菜单
    ├── 开始烹饪
    ├── 编辑
    └── 分享

食材清单
├── 按类别分组显示
├── 勾选已备好的食材
├── 一键加入购物清单
└── 食材用量计算器

制作步骤
├── 大字模式
├── 步骤进度指示
├── 内联计时器
├── 关键提醒高亮
└── 语音播报按钮

我的记录
├── 历次制作记录
├── 我的笔记
├── 我的评分
└── 成品照片

相关推荐
└── 相似菜谱/常一起做
```

---

### 2. 智能推荐

#### 2.1 今日推荐

**功能描述**
打开 App 即显示今日推荐

**推荐策略**

**基础推荐**
- 轮播显示收藏菜谱
- 按最近制作时间排序
- 按评分高低排序

**智能推荐**
- 基于历史偏好
- 基于当前情境
- 基于现有食材
- 基于营养均衡

**推荐卡片**
```
┌─────────────────────────────────┐
│ 🍅 番茄炒蛋                    │
│ ┌─────────────────────────────┐ │
│ │ [成品图片]                  │ │
│ └─────────────────────────────┘ │
│ ⏱ 15分钟 | 📊 简单 | ⭐4.8     │
│ 💡 上次做：30天前              │
│                                 │
│ [加入今日菜单]  [查看详情]      │
└─────────────────────────────────┘
```

#### 2.2 食材推荐

**功能描述**
根据现有食材推荐可做的菜谱

**匹配度计算**
```
完全匹配：100%
├── 所有食材都有
└── 可以直接制作

部分匹配：50%-99%
├── 大部分食材有
└── 只需购买少量

创意匹配：30%-49%
├── 主要食材有
└── 可以做替代
```

**推荐排序**
- 完全匹配优先
- 按匹配度排序
- 按评分排序
- 按制作时间排序

#### 2.3 季节推荐

**功能描述**
根据当季食材和季节特点推荐

**时令食材库**
- 每月更新时令食材
- 春季：春笋、菠菜、草莓...
- 夏季：丝瓜、苦瓜、西瓜...
- 秋季：蟹、柿子、南瓜...
- 冬季：萝卜、白菜、羊肉...

**季节推荐**
- 春季：推荐清淡、新鲜的菜
- 夏季：推荐凉菜、汤品
- 秋季：推荐滋补菜谱
- 冬季：推荐暖身火锅、炖菜

#### 2.4 个性化学习

**功能描述**
学习用户偏好，持续优化推荐

**学习维度**

**口味偏好**
- 喜欢的菜系
- 能接受的辣度
- 偏好的口味（咸/甜/酸）
- 不喜欢的食材

**时间偏好**
- 工作日偏好快手菜
- 周末愿意花时间
- 特定时间的偏好

**营养偏好**
- 在减肥/增肌
- 需要补充什么
- 饮食限制（素食/清真）

**家人偏好**
- 每个家庭成员的喜好
- 过敏和忌口
- 喜欢的菜/不喜欢的菜

**反馈学习**
- 用户的评分
- 制作频率
- 菜谱完成率
- 搜索关键词

---

### 3. 菜单规划

#### 3.1 每日菜单

**功能描述**
规划和管理每日餐食

**界面设计**
```
┌─────────────────────────────────────┐
│  📅 2025年1月31日 周五             │
├─────────────────────────────────────┤
│                                     │
│  早餐 🌅                            │
│  ┌─────────────────────────────┐   │
│  │ [+] 添加早餐                │   │
│  └─────────────────────────────┘   │
│                                     │
│  午餐 ☀️                            │
│  ┌─────────────────────────────┐   │
│  │ 🍅 番茄炒蛋                 │   │
│  │ ⏱ 15分钟 | 2人份           │   │
│  └─────────────────────────────┘   │
│                                     │
│  晚餐 🌙                            │
│  ┌─────────────────────────────┐   │
│  │ 🥩 青椒肉丝                 │   │
│  │ ⏱ 20分钟 | 3人份           │   │
│  └─────────────────────────────┘   │
│                                     │
│  🛒 生成购物清单                    │
└─────────────────────────────────────┘
```

**操作功能**
- 拖拽菜谱添加到餐次
- 点击查看菜谱详情
- 长按删除/替换
- 复制到其他日期

#### 3.2 周菜单生成

**功能描述**
AI 辅助生成一周菜单

**生成配置**
```
时间范围
├── 本周工作日
├── 本周全周
├── 下周工作日
├── 下周全周
└── 自定义日期

餐次选择
├── 仅午餐
├── 仅晚餐
└── 全天

条件设定
├── 时间限制
├── 营养要求（荤素搭配/营养均衡）
├── 口味偏好（清淡/丰富）
├── 特殊需求（适合带饭/孩子喜欢）
└── 避免重复（一周内不重复主材）

生成数量
├── 1套方案
└── 2-3套方案供选择
```

**智能检查**
- 营养均衡检查
- 食材重复检查
- 口味多样性检查
- 特殊日期提醒

#### 3.3 宴请模式

**功能描述**
规划多人聚餐菜单

**宴请配置**
```
基本信息
├── 人数
├── 场合（家常/节日/庆祝）
├── 预算（可选）
└── 特殊需求

菜品规划
├── 推荐组合（前菜+主菜+汤）
├── 菜品数量建议
├── 食材搭配建议
└── 口味层次建议

时间规划
├── 开始时间倒推
├── 并行任务显示
├── 关键节点提醒
└── 多菜协调
```

**协作功能**
- 分享给家人/朋友
- 任务分配
- 进度同步

#### 3.4 营养分析

**功能描述**
分析菜单的营养情况

**分析维度**
```
营养均衡
├── 蛋白质/脂肪/碳水比例
├── 蔬菜摄入量
├── 肉类摄入量
└── 热量估算

饮食建议
├── 蛋白质不足/过多
├── 蔬菜偏少
├── 油脂偏多
└── 建议调整

特殊饮食
├── 减肥餐
├── 增肌餐
├── 低脂/低盐
└── 素食
```

**可视化展示**
- 营养成分饼图
- 每日趋势图
- 周统计数据

---

### 4. 购物清单

#### 4.1 自动生成

**功能描述**
根据菜单自动生成购物清单

**生成逻辑**
```
1. 获取菜单中的所有菜谱
2. 提取所有食材和用量
3. 减去现有库存
4. 合并相同食材（累加数量）
5. 分类排序（按超市区域）
6. 生成清单
```

**智能合并示例**
```
青椒：
- 周一宫保鸡丁：2个
- 周四青椒肉丝：1个
→ 合计：青椒 3个
```

#### 4.2 清单管理

**功能描述**
管理和使用购物清单

**界面设计**
```
┌─────────────────────────────────────┐
│  🛒 购物清单                        │
│  预计费用：约80元                   │
├─────────────────────────────────────┤
│                                     │
│  🥬 蔬菜区 (5项)                    │
│  ☑️ 青椒 3个                        │
│  ☑️ 番茄 2个                        │
│  ☐ 小白菜 1把                       │
│  ☐ 冬瓜 500g                        │
│  ☐ 葱 2根                           │
│                                     │
│  🥩 肉类区 (2项)                    │
│  ☐ 鸡胸肉 300g                      │
│  ☐ 猪里脊 200g                      │
│                                     │
│  🧂 调料区 (1项)                    │
│  ☐ 生抽 1瓶                         │
│                                     │
│  [+ 添加物品]  [✅ 完成购物]        │
└─────────────────────────────────────┘
```

**操作功能**
- 点击勾选已购买
- 滑动删除
- 长按编辑数量
- 添加临时物品
- 添加备注

#### 4.3 价格记录

**功能描述**
记录购物价格，积累数据

**记录内容**
- 购买日期
- 购买地点
- 物品和价格
- 总花费

**数据分析**
- 每月花费趋势
- 常买物品价格对比
- 超市价格对比

---

### 5. 烹饪模式

#### 5.1 横屏大字模式

**功能描述**
专为厨房场景设计的烹饪界面

**界面特点**
- 横屏显示
- 超大字体
- 简洁信息
- 高对比度
- 单屏一步

#### 5.2 语音播报

**功能描述**
语音播报烹饪步骤

**播报内容**
- 下一步操作
- 关键提醒
- 计时结束
- 注意事项

**语音设置**
- 语速调节
- 音量调节
- 自动播报/手动触发
- 方言选择（可选）

#### 5.3 手势操作

**功能描述**
支持简单的手势操作

**支持手势**
| 手势 | 功能 |
|------|------|
| 左滑 | 下一步 |
| 右滑 | 上一步 |
| 点击中央 | 暂停/播放 |
| 音量+ | 下一步 |
| 音量- | 上一步 |

**隔空手势**（可选）
- 前置摄像头检测
- 挥手切换步骤

#### 5.4 计时器

**功能描述**
步骤内嵌计时器

**功能特点**
- 一键设置计时
- 多个计时器并行
- 语音提醒
- 震动提醒
- 倒计时显示

**使用场景**
```
步骤3：加入切好的青椒
↓ 点击"2分钟"
↓ 自动开始倒计时
↓ 时间到：语音提醒"可以翻面了"
```

#### 5.5 多菜并行

**功能描述**
同时做多道菜时的协调

**界面设计**
```
┌─────────────────────────────────────┐
│  🔥 并行烹饪 (2道菜)                │
├─────────────────────────────────────┤
│                                     │
│  🟢 青椒肉丝 - 步骤3/8              │
│  炒制肉丝中...                       │
│  ⏱ 剩余：2分钟                      │
│                                     │
│  🔵 紫菜蛋花汤 - 步骤2/4            │
│  等待水开...                         │
│  ⏱ 剩余：5分钟                      │
│                                     │
│  💡 提示：水快开了，可以先做汤       │
└─────────────────────────────────────┘
```

**协调提醒**
- 显示所有进行中的菜
- 提示下一步该做什么
- 颜色标记紧急程度
- 时间冲突提醒

---

### 6. 食材库存

#### 6.1 库存管理

**功能描述**
记录和管理家中食材

**添加方式**
- 手动录入
- 扫码添加
- 从购物清单勾选
- 从菜谱导入

**库存信息**
```
食材名称
├── 数量
├── 单位
├── 购买日期
├── 保质期
├── 存放位置（冷藏/冷冻/常温）
└── 备注
```

#### 6.2 保质期提醒

**功能描述**
提醒食材即将过期

**提醒规则**
- 提前3天提醒
- 提前1天提醒
- 当天提醒

**提醒方式**
- 推送通知
- App 内小红点
- 首页显示

**智能建议**
```
"青椒还有2天到期，建议做：
  - 宫保鸡丁
  - 青椒肉丝
  - 虎皮青椒"
```

#### 6.3 智能建议

**功能描述**
基于库存给出烹饪建议

**建议类型**
- 可直接做的菜
- 缺少量食材的菜
- 临期食材推荐

---

### 7. 个人中心

#### 7.1 口味偏好

**功能描述**
记录和管理口味偏好

**偏好设置**
```
基本信息
├── 喜欢的菜系（多选）
├── 能接受的辣度
├── 偏好的口味
└── 不喜欢的食材

特殊需求
├── 饮食限制
├── 过敏食物
└── 健康目标
```

#### 7.2 家庭信息

**功能描述**
管理家庭成员信息

**成员信息**
```
成员档案
├── 姓名/昵称
├── 关系
├── 口味偏好
├── 过敏/忌口
├── 喜欢的菜
└── 不喜欢的菜
```

**应用场景**
- 推荐时考虑家人偏好
- 菜单规划避开忌口
- 营养分析考虑全家需求

#### 7.3 数据统计

**功能描述**
展示个人烹饪数据

**统计维度**
```
烹饪习惯
├── 本月/本年做了多少道菜
├── 平均每周做饭次数
├── 最常做的菜 TOP10
├── 最喜欢的菜系
└── 厨艺成长曲线

菜单规划
├── 计划执行率
├── 最常规划的餐次
└── 规划 vs 即兴比例

购物分析
├── 每月食材花费
├── 最常购买的食材
└── 超市偏好

家人喜好
├── 家人最喜欢的菜
├── 家人最不喜欢的食材
└── 全家都喜欢的菜
```

**可视化**
- 图表展示
- 趋势分析
- 对比分析

#### 7.4 设置管理

**功能描述**
App 设置和配置

**设置项**
```
通知设置
├── 每日推荐提醒
├── 菜单提醒
├── 购物提醒
└── 食材到期提醒

外观设置
├── 主题（浅色/深色/自动）
├── 字体大小
└── 图片质量

数据设置
├── 数据备份
├── 数据导出
├── 数据恢复
└── 清除缓存

单位设置
├── 重量单位
├── 体积单位
└── 温度单位

关于
├── 版本信息
├── 帮助文档
├── 反馈建议
└── 隐私政策
```

---

## 🎨 UI/UX 设计规范

### 设计原则

1. **简洁至上**：减少认知负担，操作不超过3步
2. **温暖亲切**：使用温暖配色，柔和圆角
3. **高效流畅**：快速响应，流畅动画
4. **清晰反馈**：每个操作都有明确反馈
5. **容错性强**：可撤销，可恢复

### 视觉设计

#### 配色方案

```
主色调
├── 温暖橙 #FF6B35
├── 米白 #FAF7F2
└── 深灰 #2C3E50

辅助色
├── 蔬菜绿 #27AE60
├── 肉类红 #E74C3C
├── 海鲜蓝 #3498DB
└── 主食黄 #F39C12

状态色
├── 成功 #27AE60
├── 警告 #F39C12
├── 错误 #E74C3C
└── 信息 #3498DB

背景色
├── 主背景 #FAF7F2
├── 卡片背景 #FFFFFF
├── 次级背景 #F5F5F5
└── 深色模式 #1A1A1A
```

#### 字体规范

```
字体家族
├── 中文：思源黑体 / 苹方
├── 英文：San Francisco / Roboto
└── 数字：SF Mono / Roboto Mono

字体大小
├── 大标题：24sp / 28sp
├── 标题：20sp
├── 副标题：18sp
├── 正文：16sp
├── 辅助文字：14sp
└── 说明文字：12sp

字重
├── 粗体：标题、强调
├── 中等：正文、按钮
└── 常规：辅助文字
```

#### 圆角规范

```
圆角大小
├── 大圆角：16px（卡片）
├── 中圆角：12px（按钮）
├── 小圆角：8px（标签）
└── 微圆角：4px（图片）
```

#### 间距规范

```
基础间距单位：4px

常用间距
├── 极小：4px
├── 小：8px
├── 中：16px
├── 大：24px
├── 很大：32px
└── 超大：48px
```

### 交互设计

#### 操作反馈

```
点击反馈
├── 视觉：颜色变化/缩放
├── 触觉：轻微震动
└── 声音：轻微点击音

加载状态
├── 骨架屏
├── 加载动画
└── 进度条

空状态
├── 友好插图
├── 引导文案
└── 操作按钮

错误状态
├── 清晰错误说明
├── 解决建议
└── 重试按钮
```

#### 手势操作

```
通用手势
├── 点击：选择/确认
├── 长按：更多选项
├── 滑动：翻页/删除
├── 双击：收藏/点赞
└── 捏合：缩放图片

特殊手势（厨房模式）
├── 手背滑动：切换步骤
├── 音量键：切换步骤
├── 隔空手势：切换步骤（可选）
└── 语音控制：各种操作（可选）
```

#### 动画效果

```
页面切换
├── 进入：从右侧滑入
├── 退出：向右侧滑出
├── 模态：从底部弹出
└── 淡入淡出：300ms

元素动画
├── 按钮点击：缩放（95%-100%）
├── 列表项加载：依次淡入
├── 删除：向左滑出
└── 勾选：缩放+颜色变化

加载动画
├── 旋转：360°，1s
├── 脉冲：透明度变化
└── 进度：平滑过渡
```

### 响应式设计

#### 屏幕适配

```
手机屏幕（主要）
├── 小屏：< 5.5英寸
├── 中屏：5.5 - 6.5英寸
└── 大屏：> 6.5英寸

平板屏幕（辅助）
├── 小平板：7 - 9英寸
└── 大平板：> 9英寸

横屏适配
├── 手机：烹饪模式横屏
├── 平板：分栏显示
└── 折叠屏：自适应
```

#### 布局适配

```
信息密度
├── 手机：单列，精简信息
├── 平板：双列，完整信息
└── 横屏：充分利用宽度

操作方式
├── 手机：拇指操作区
├── 平板：双手操作
└── 厨房模式：大按钮，简单操作
```

---

## 📊 数据模型

### 核心实体

#### Recipe（菜谱）

```kotlin
data class Recipe(
    // 基础信息
    val id: String,
    val name: String,
    val description: String?,
    val images: List<String>,
    val categoryId: String?,
    val tags: List<String>,

    // 烹饪信息
    val cookingTime: Int,        // 分钟
    val prepTime: Int?,          // 准备时间（可选）
    val servings: Int,           // 份数
    val difficulty: DifficultyLevel,

    // 营养信息（可选）
    val calories: Int?,          // 卡路里
    val protein: Double?,        // 蛋白质 g
    val fat: Double?,            // 脂肪 g
    val carbs: Double?,          // 碳水 g

    // 统计信息
    val cookingCount: Int,       // 制作次数
    val averageRating: Float,    // 平均评分
    val lastCookedAt: Long?,     // 最后制作时间

    // 元数据
    val createdAt: Long,
    val updatedAt: Long,
    val createdBy: String?,      // 创建者（家庭共享）
    val isFavorite: Boolean,
    val isPublic: Boolean        // 是否公开（家庭共享）
)
```

#### RecipeIngredient（菜谱食材）

```kotlin
data class RecipeIngredient(
    val id: String,
    val recipeId: String,
    val ingredientId: String?,
    val name: String,            // 食材名称（可能没有对应Ingredient）
    val quantity: Double,
    val unit: String,
    val notes: String?,          // 如"去蒂切块"
    val isOptional: Boolean,     // 是否可选
    val sortOrder: Int           // 排序
)
```

#### RecipeInstruction（菜谱步骤）

```kotlin
data class RecipeInstruction(
    val id: String,
    val recipeId: String,
    val stepNumber: Int,
    val instruction: String,     // 步骤描述
    val image: String?,          // 步骤配图
    val duration: Int?,          // 此步耗时（秒）
    val temperature: Int?,       // 温度（如烤箱温度）
    val isKeyStep: Boolean,      // 是否关键步骤
    val reminder: String?        // 提醒内容
)
```

#### RecipeNote（菜谱笔记）

```kotlin
data class RecipeNote(
    val id: String,
    val recipeId: String,
    val cookingDate: Long,       // 制作日期
    val rating: Int,             // 评分 1-5
    val note: String?,           // 笔记内容
    val images: List<String>,    // 成品图
    const val success: Boolean,  // 是否成功
    const val modifications: String?, // 改动记录
    val createdAt: Long
)
```

#### MealPlan（餐食计划）

```kotlin
data class MealPlan(
    val id: String,
    val date: Long,              // 日期
    val mealType: MealType,      // 早餐/午餐/晚餐/加餐
    val recipeId: String?,
    val servings: Int,
    val notes: String?,
    val isCompleted: Boolean,    // 是否已完成
    val actualRecipes: List<String>, // 实际做的菜（可能改变）
    val createdAt: Long,
    val updatedAt: Long
)

enum class MealType {
    BREAKFAST,
    LUNCH,
    DINNER,
    SNACK
}
```

#### PantryItem（库存食材）

```kotlin
data class PantryItem(
    val id: String,
    val ingredientId: String?,
    val name: String,
    val quantity: Double,
    val unit: String,
    val purchaseDate: Long?,
    val expiryDate: Long?,
    val storageLocation: StorageLocation, // 冷藏/冷冻/常温
    val notes: String?
)

enum class StorageLocation {
    FRIDGE,     // 冷藏
    FREEZER,     // 冷冻
    PANTRY,      // 常温
    OTHER        // 其他
}
```

#### ShoppingList（购物清单）

```kotlin
data class ShoppingList(
    val id: String,
    val name: String,
    val date: Long,
    val items: List<ShoppingItem>,
    val isCompleted: Boolean,
    const val totalEstimated: Double?, // 预计花费
    const val actualTotal: Double?,    // 实际花费
    val store: String?,         // 购物地点
    val createdAt: Long,
    val completedAt: Long?
)

data class ShoppingItem(
    val id: String,
    val listId: String,
    val name: String,
    val quantity: Double,
    val unit: String,
    val category: String,       // 分类
    const val estimatedPrice: Double?,
    const val actualPrice: Double?,
    val isPurchased: Boolean,
    val isChecked: Boolean,
    val notes: String?,
    val sortOrder: Int
)
```

#### UserProfile（用户偏好）

```kotlin
data class UserProfile(
    val id: String,

    // 口味偏好
    val preferredCuisines: List<String>,      // 喜欢的菜系
    val spiceLevel: SpiceLevel,               // 辣度偏好
    val flavorPreferences: List<String>,      // 口味偏好
    val dislikedIngredients: List<String>,    // 不喜欢的食材

    // 饮食限制
    val dietaryRestrictions: List<String>,    // 饮食限制
    val allergies: List<String>,              // 过敏原
    val healthGoal: HealthGoal?,              // 健康目标

    // 时间偏好
    val weekdayCookingTime: Int?,             // 工作日做饭时间（分钟）
    val weekendCookingTime: Int?,             // 周末做饭时间（分钟）

    // 通知设置
    val notificationSettings: NotificationSettings,

    // 其他设置
    val unitSystem: UnitSystem,               // 单位制
    val theme: AppTheme,
    val language: String,

    val createdAt: Long,
    val updatedAt: Long
)

enum class SpiceLevel {
    NONE,       // 不吃辣
    MILD,       // 微辣
    MEDIUM,     // 中辣
    HOT,        // 重辣
    EXTREME     // 特辣
}

enum class HealthGoal {
    WEIGHT_LOSS,       // 减肥
    MUSCLE_GAIN,       // 增肌
    MAINTENANCE,       // 保持
    HEALTHY_EATING     // 健康饮食
}

enum class UnitSystem {
    METRIC,     // 公制
    IMPERIAL    // 英制
}
```

#### FamilyMember（家庭成员）

```kotlin
data class FamilyMember(
    val id: String,
    val name: String,
    val relationship: String,      // 关系（自己/配偶/孩子/父母）
    val age: Int?,
    val preferredCuisines: List<String>,
    val dislikedIngredients: List<String>,
    val allergies: List<String>,
    val favoriteRecipes: List<String>,     // 喜欢的菜
    const val dislikedRecipes: List<String>, // 不喜欢的菜
    val notes: String?
)
```

---

## 🎯 功能优先级

### P0 - 核心功能（MVP 必须有）

| 功能 | 优先级 | 说明 |
|------|--------|------|
| 菜谱 CRUD | P0 | 添加、编辑、删除、查看菜谱 |
| 基础搜索 | P0 | 按菜名搜索 |
| 菜单规划 | P0 | 添加每日菜单 |
| 购物清单 | P0 | 手动添加购物项 |
| 烹饪模式 | P0 | 横屏大字显示步骤 |

### P1 - 重要功能（V1.0 应该有）

| 功能 | 优先级 | 说明 |
|------|--------|------|
| 智能推荐 | P1 | 基于历史和偏好的推荐 |
| 高级筛选 | P1 | 按时间、难度、食材筛选 |
| 自动购物清单 | P1 | 从菜单自动生成 |
| 食材库存 | P1 | 记录现有食材 |
| 收藏分类 | P1 | 菜谱分类管理 |
| 制作记录 | P1 | 记录制作次数和评分 |

### P2 - 增强功能（V1.1 可以有）

| 功能 | 优先级 | 说明 |
|------|--------|------|
| 语音播报 | P2 | 烹饪模式语音指导 |
| 保质期提醒 | P2 | 食材过期提醒 |
| 周菜单生成 | P2 | AI 生成一周菜单 |
| 营养分析 | P2 | 基础营养信息 |
| 快速保存 | P2 | 从链接快速保存 |
| 数据统计 | P2 | 烹饪数据统计 |

### P3 - 高级功能（V2.0 可以有）

| 功能 | 优先级 | 说明 |
|------|--------|------|
| AI 菜谱识别 | P3 | 从图片识别菜谱 |
| 语音控制 | P3 | 厨房模式语音控制 |
| 宴请模式 | P3 | 多人聚餐规划 |
| 家庭共享 | P3 | 家庭成员共享菜谱 |
| 云端同步 | P3 | 多设备同步 |
| 营养建议 | P3 | 深度营养分析 |
| 季节推荐 | P3 | 时令食材推荐 |

---

## 🏗️ 技术架构

### 移动端架构

```
┌─────────────────────────────────────────────────────────┐
│                    Presentation Layer                   │
│  ┌────────────┐  ┌────────────┐  ┌────────────────┐   │
│  │   Views    │  │ ViewModels │  │ Navigation     │   │
│  │ (Compose)  │◄─┤   (State)  │─►│    (Graph)     │   │
│  └────────────┘  └────────────┘  └────────────────┘   │
└─────────────────────────────────────────────────────────┘
                           │
                           ▼
┌─────────────────────────────────────────────────────────┐
│                     Domain Layer                        │
│  ┌────────────┐  ┌────────────┐  ┌────────────────┐   │
│  │ Use Cases  │  │ Repositories│  │    Mappers    │   │
│  │ (Business) │  │  (Abstract) │  │  (Transform)  │   │
│  └────────────┘  └────────────┘  └────────────────┘   │
└─────────────────────────────────────────────────────────┘
                           │
                           ▼
┌─────────────────────────────────────────────────────────┐
│                      Data Layer                         │
│  ┌────────────┐  ┌────────────┐  ┌────────────────┐   │
│  │  Room DB   │  │    DAOs    │  │   Entities     │   │
│  │  (SQLite)  │◄─┤ (Queries)  │─►│   (Models)     │   │
│  └────────────┘  └────────────┘  └────────────────┘   │
└─────────────────────────────────────────────────────────┘
```

### 技术栈

#### Android
- 语言：Kotlin
- UI：Jetpack Compose
- 架构：MVVM + Clean Architecture
- 数据库：Room
- 异步：Coroutines + Flow
- 依赖注入：Hilt（可选）
- 图片：Coil
- 测试：JUnit, Mockito, Compose Testing

#### iOS（未来）
- 语言：Swift
- UI：SwiftUI
- 架构：MVVM + Clean Architecture
- 数据库：SwiftData / Core Data
- 异步：async/await
- 依赖注入：SwiftUI @StateObject
- 图片：SDWebImage
- 测试：XCTest

### 数据流

```
用户操作
   │
   ▼
UI (Compose)
   │
   ▼
ViewModel (处理业务逻辑)
   │
   ▼
Repository (数据抽象)
   │
   ├─► LocalDataSource (Room)
   │
   └─► RemoteDataSource (可选，云端同步)
   │
   ▼
Flow/LiveData (数据流回 UI)
   │
   ▼
UI 更新
```

---

## 📈 成功指标

### 产品指标

| 指标 | 目标 | 说明 |
|------|------|------|
| 日活用户 (DAU) | - | 每日活跃用户数 |
| 月活用户 (MAU) | - | 每月活跃用户数 |
| 留存率 | D7>30%, D30>15% | 用户留存 |
| 使用频次 | ≥3次/周 | 用户每周使用次数 |

### 功能指标

| 指标 | 目标 | 说明 |
|------|------|------|
| 菜谱添加率 | ≥80% | 用户添加菜谱的比例 |
| 菜单使用率 | ≥60% | 使用菜单规划功能的比例 |
| 推荐点击率 | ≥20% | 推荐菜谱的点击率 |
| 烹饪模式使用率 | ≥40% | 使用烹饪模式的频率 |

### 体验指标

| 指标 | 目标 | 说明 |
|------|------|------|
| App 启动时间 | <2s | 冷启动时间 |
| 页面加载时间 | <1s | 页面切换时间 |
| 崩溃率 | <0.1% | 应用崩溃率 |
| ANR 率 | <0.05% | Android 无响应率 |

### 用户满意度

| 指标 | 目标 | 说明 |
|------|------|------|
| 应用商店评分 | ≥4.5 | App Store / Play Store |
| NPS | ≥50 | 净推荐值 |
| 客服响应时间 | <24h | 用户咨询响应时间 |

---

## 📝 附录

### 术语表

| 术语 | 说明 |
|------|------|
| 菜谱 | 一道菜的完整制作方法 |
| 食材 | 做菜用的原材料 |
| 步骤 | 制作菜谱的具体操作 |
| 菜单 | 一天或多天的餐食计划 |
| 购物清单 | 需要购买的食材列表 |
| 库存 | 家中现有的食材 |
| 烹饪模式 | 专为厨房设计的界面模式 |

### 参考文档

- [架构设计文档](./ARCHITECTURE.md)
- [开发指南](./DEVELOPMENT.md)
- [API 文档](./API.md)（待创建）
- [测试计划](./TESTING.md)（待创建）

### 更新记录

| 版本 | 日期 | 更新内容 | 作者 |
|------|------|----------|------|
| 2.0 | 2025-01-31 | 基于用户场景全面重写需求文档 | - |
| 1.0 | 2025-01-29 | 初始版本 | - |

---

*本文档由产品团队和维护，如有疑问请联系产品负责人*
