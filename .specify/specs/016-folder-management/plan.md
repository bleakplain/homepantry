# Plan: æ”¶è—åˆ†ç±»ç®¡ç†

**Spec ID**: 016
**åŠŸèƒ½åç§°**: æ”¶è—åˆ†ç±»ç®¡ç†
**ä¼˜å…ˆçº§**: P1
**çŠ¶æ€**: ğŸš§ è§„åˆ’ä¸­
**åˆ›å»ºæ—¥æœŸ**: 2026-02-20
**æœ€åæ›´æ–°**: 2026-02-20

---

## æŠ€æœ¯æ ˆ

### æ ¸å¿ƒæŠ€æœ¯

| æŠ€æœ¯ | ç‰ˆæœ¬ | ç”¨é€” |
|------|------|------|
| Kotlin | 1.9+ | å¼€å‘è¯­è¨€ |
| Jetpack Compose | 1.5+ | UI æ¡†æ¶ |
| Room | 2.6+ | æœ¬åœ°æ•°æ®åº“ |
| Coroutines | 1.7+ | å¼‚æ­¥å¤„ç† |
| Flow | Kotlin | æ•°æ®æµ |

### ä¸»è¦ä¾èµ–

```kotlin
// Jetpack Compose
implementation(platform("androidx.compose:compose-bom:2023.10.01"))
implementation("androidx.compose.ui:ui")
implementation("androidx.compose.material3:material3")
implementation("androidx.compose.material:material-icons-extended")

// Room Database
implementation("androidx.room:room-runtime:2.6.1")
implementation("androidx.room:room-ktx:2.6.1")
ksp("androidx.room:room-compiler:2.6.1")

// ViewModel
implementation("androidx.lifecycle:lifecycle-viewmodel-compose:2.6.2")

// Navigation
implementation("androidx.navigation:navigation-compose:2.7.5")

// Testing
testImplementation("junit:junit:4.13.2")
testImplementation("org.mockito:mockito-core:5.7.0")
```

---

## æ¶æ„è®¾è®¡

### æ•´ä½“æ¶æ„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    Presentation Layer               â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ FolderListScreenâ”‚  â”‚ FolderDetailScreen  â”‚   â”‚
â”‚  â”‚ (æ”¶è—å¤¹åˆ—è¡¨)     â”‚  â”‚ (æ”¶è—å¤¹è¯¦æƒ…)        â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ FolderViewModel â”‚  â”‚ RecipeListViewModel â”‚   â”‚
â”‚  â”‚  (æ”¶è—å¤¹ç®¡ç†)    â”‚  â”‚  (èœè°±åˆ—è¡¨)         â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                          â”‚
                          â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     Domain Layer                    â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚FolderRepository â”‚  â”‚RecipeRepository      â”‚   â”‚
â”‚  â”‚  (æ”¶è—å¤¹ä»“åº“)    â”‚  â”‚  (èœè°±ä»“åº“)         â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                          â”‚
                          â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        Data Layer                    â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ FolderDao        â”‚  â”‚ RecipeDao            â”‚   â”‚
â”‚  â”‚  (æ”¶è—å¤¹æ•°æ®)    â”‚  â”‚  (èœè°±æ•°æ®)         â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ Folder          â”‚  â”‚ RecipeFolder        â”‚   â”‚
â”‚  â”‚  (æ”¶è—å¤¹å®ä½“)    â”‚  â”‚  (å…³è”è¡¨å®ä½“)        â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                          â”‚
                          â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     Room Database                    â”‚
â”‚              (SQLite æœ¬åœ°æ•°æ®åº“)                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## æ•°æ®æ¨¡å‹

### æ ¸å¿ƒå®ä½“

#### Folderï¼ˆæ”¶è—å¤¹ï¼‰

| å­—æ®µ | ç±»å‹ | è¯´æ˜ | çº¦æŸ |
|------|------|------|------|
| id | String | æ”¶è—å¤¹IDï¼ˆä¸»é”®ï¼‰ | NOT NULL |
| name | String | æ”¶è—å¤¹åç§° | NOT NULL, 2-20 å­—ç¬¦ |
| icon | String? | å›¾æ ‡åç§° | NULLABLE |
| color | String? | é¢œè‰²ä»£ç ï¼ˆå¦‚ #FF6B35ï¼‰ | NULLABLE |
| sortOrder | Int | æ’åºé¡ºåº | NOT NULL, DEFAULT 0 |
| isSystem | Boolean | æ˜¯å¦ç³»ç»Ÿé»˜è®¤ | NOT NULL, DEFAULT false |
| createdAt | Long | åˆ›å»ºæ—¶é—´ï¼ˆæ—¶é—´æˆ³ï¼‰ | NOT NULL |
| updatedAt | Long | æ›´æ–°æ—¶é—´ï¼ˆæ—¶é—´æˆ³ï¼‰ | NOT NULL |

**Room å®šä¹‰**:
```kotlin
@Entity(tableName = "folders")
data class Folder(
    @PrimaryKey val id: String,
    val name: String,
    val icon: String? = null,
    val color: String? = null,
    val sortOrder: Int = 0,
    val isSystem: Boolean = false,
    val createdAt: Long = System.currentTimeMillis(),
    val updatedAt: Long = System.currentTimeMillis()
)
```

#### RecipeFolderï¼ˆèœè°±æ”¶è—å¤¹å…³è”ï¼‰

| å­—æ®µ | ç±»å‹ | è¯´æ˜ | çº¦æŸ |
|------|------|------|------|
| id | String | å…³è”IDï¼ˆä¸»é”®ï¼‰ | NOT NULL |
| recipeId | String | èœè°±ID | NOT NULL, å¤–é”® |
| folderId | String | æ”¶è—å¤¹ID | NOT NULL, å¤–é”® |
| addedAt | Long | æ·»åŠ æ—¶é—´ï¼ˆæ—¶é—´æˆ³ï¼‰ | NOT NULL |

**Room å®šä¹‰**:
```kotlin
@Entity(
    tableName = "recipe_folders",
    foreignKeys = [
        ForeignKey(
            entity = Recipe::class,
            parentColumns = ["id"],
            childColumns = ["recipeId"],
            onDelete = ForeignKey.CASCADE
        ),
        ForeignKey(
            entity = Folder::class,
            parentColumns = ["id"],
            childColumns = ["folderId"],
            onDelete = ForeignKey.CASCADE
        )
    ],
    indices = [
        Index(value = ["recipeId"]),
        Index(value = ["folderId"]),
        Index(value = ["recipeId", "folderId"], unique = true)
    ]
)
data class RecipeFolder(
    @PrimaryKey val id: String,
    val recipeId: String,
    val folderId: String,
    val addedAt: Long = System.currentTimeMillis()
)
```

---

## å…³é”®åŠŸèƒ½å®ç°

### 1. æ”¶è—å¤¹ CRUD

#### åˆ›å»ºæ”¶è—å¤¹

```kotlin
@Transaction
suspend fun createFolder(name: String, icon: String?, color: String?): Result<Folder> {
    return try {
        val folder = Folder(
            id = UUID.randomUUID().toString(),
            name = name,
            icon = icon,
            color = color,
            sortOrder = getMaxSortOrder() + 1
        )
        folderDao.insert(folder)
        Result.success(folder)
    } catch (e: Exception) {
        Result.failure(e)
    }
}
```

#### æ›´æ–°æ”¶è—å¤¹

```kotlin
suspend fun updateFolder(folder: Folder): Result<Unit> {
    return try {
        folderDao.update(folder.copy(updatedAt = System.currentTimeMillis()))
        Result.success(Unit)
    } catch (e: Exception) {
        Result.failure(e)
    }
}
```

#### åˆ é™¤æ”¶è—å¤¹

```kotlin
@Transaction
suspend fun deleteFolder(folderId: String): Result<Unit> {
    return try {
        // å…ˆåˆ é™¤å…³è”çš„èœè°±
        recipeFolderDao.deleteByFolderId(folderId)
        // å†åˆ é™¤æ”¶è—å¤¹
        folderDao.deleteById(folderId)
        Result.success(Unit)
    } catch (e: Exception) {
        Result.failure(e)
    }
}
```

### 2. èœè°±æ”¶è—

#### æ”¶è—èœè°±åˆ°æ”¶è—å¤¹

```kotlin
suspend fun addToFolder(
    recipeId: String,
    folderId: String
): Result<RecipeFolder> {
    return try {
        val recipeFolder = RecipeFolder(
            id = UUID.randomUUID().toString(),
            recipeId = recipeId,
            folderId = folderId
        )
        recipeFolderDao.insert(recipeFolder)
        Result.success(recipeFolder)
    } catch (e: SQLiteConstraintException) {
        // å·²å­˜åœ¨
        Result.failure(Exception("èœè°±å·²åœ¨æ­¤æ”¶è—å¤¹ä¸­"))
    } catch (e: Exception) {
        Result.failure(e)
    }
}
```

#### æ‰¹é‡æ”¶è—

```kotlin
suspend fun batchAddToFolder(
    recipeIds: List<String>,
    folderId: String
): Result<Int> {
    return try {
        var count = 0
        recipeIds.forEach { recipeId ->
            val recipeFolder = RecipeFolder(
                id = UUID.randomUUID().toString(),
                recipeId = recipeId,
                folderId = folderId
            )
            try {
                recipeFolderDao.insert(recipeFolder)
                count++
            } catch (e: SQLiteConstraintException) {
                // è·³è¿‡å·²å­˜åœ¨çš„
            }
        }
        Result.success(count)
    } catch (e: Exception) {
        Result.failure(e)
    }
}
```

#### ä»æ”¶è—å¤¹ç§»é™¤èœè°±

```kotlin
suspend fun removeFromFolder(
    recipeId: String,
    folderId: String
): Result<Unit> {
    return try {
        recipeFolderDao.delete(recipeId, folderId)
        Result.success(Unit)
    } catch (e: Exception) {
        Result.failure(e)
    }
}
```

### 3. æ”¶è—å¤¹æ’åº

```kotlin
suspend fun reorderFolders(folderIds: List<String>): Result<Unit> {
    return try {
        folderIds.forEachIndexed { index, folderId ->
            folderDao.updateSortOrder(folderId, index)
        }
        Result.success(Unit)
    } catch (e: Exception) {
        Result.failure(e)
    }
}
```

---

## UI è®¾è®¡

### æ”¶è—å¤¹åˆ—è¡¨é¡µé¢

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  æˆ‘çš„æ”¶è—              [+ åˆ›å»º]              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  â­ æˆ‘çš„æ”¶è—        25 ä¸ªèœè°±              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚ ğŸ½ï¸ å‘¨æœ«å®´è¯·      10 ä¸ªèœè°±       â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚ ğŸŒ¶ï¸ å·èœ          15 ä¸ªèœè°±       â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚ ğŸ¥¬ æ¸…æ·¡é¥®é£Ÿ       8 ä¸ªèœè°±       â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚ â±ï¸ å¿«æ‰‹èœ        20 ä¸ªèœè°±       â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### æ”¶è—å¤¹è¯¦æƒ…é¡µé¢

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸ½ï¸ å‘¨æœ«å®´è¯·             [ç¼–è¾‘] [åˆ é™¤]    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  æ’åº: [æ·»åŠ æ—¶é—´ â–¼]         ç­›é€‰ [å…¨éƒ¨ â–¼]  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚ [å›¾ç‰‡]  çº¢çƒ§è‚‰                    â”‚    â”‚
â”‚  â”‚        â­4.8 | 60åˆ†é’Ÿ | ä¸­ç­‰      â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚ [å›¾ç‰‡]  æ¸…è’¸é±¼                    â”‚    â”‚
â”‚  â”‚        â­4.9 | 30åˆ†é’Ÿ | ç®€å•      â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚ [å›¾ç‰‡]  ç™½åˆ‡é¸¡                    â”‚    â”‚
â”‚  â”‚        â­4.7 | 45åˆ†é’Ÿ | ä¸­ç­‰      â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### åˆ›å»º/ç¼–è¾‘æ”¶è—å¤¹å¯¹è¯æ¡†

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  åˆ›å»ºæ”¶è—å¤¹                          [å–æ¶ˆ] â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  åç§°                                    â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ å‘¨æœ«å®´è¯·                             â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                         â”‚
â”‚  å›¾æ ‡                                    â”‚
â”‚  [ğŸ½ï¸] [ğŸŒ¶ï¸] [ğŸ¥¬] [â±ï¸] [â­] [â¤ï¸] [ğŸ²]  â”‚
â”‚                                         â”‚
â”‚  é¢œè‰²                                    â”‚
â”‚  [ ] [ ] [ ] [ ] [ ]                    â”‚
â”‚                                         â”‚
â”‚                            [ä¿å­˜] [å–æ¶ˆ] â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## æ€§èƒ½ä¼˜åŒ–

### æ•°æ®åº“ä¼˜åŒ–

1. **ç´¢å¼•ä¼˜åŒ–**
   ```kotlin
   @Entity(
       tableName = "recipe_folders",
       indices = [
           Index(value = ["recipeId"]),
           Index(value = ["folderId"]),
           Index(value = ["recipeId", "folderId"], unique = true)
       ]
   )
   ```

2. **æŸ¥è¯¢ä¼˜åŒ–**
   - ä½¿ç”¨ `@Transaction` ä¿è¯äº‹åŠ¡æ€§
   - ä½¿ç”¨ Flow è¿›è¡Œæµå¼æŸ¥è¯¢
   - é¿å…N+1æŸ¥è¯¢

3. **ç¼“å­˜ç­–ç•¥**
   - ç¼“å­˜æ”¶è—å¤¹åˆ—è¡¨
   - ç¼“å­˜èœè°±æ•°é‡

### UI ä¼˜åŒ–

1. **å¼‚æ­¥åŠ è½½**
   - ä½¿ç”¨ Coroutines è¿›è¡Œå¼‚æ­¥æŸ¥è¯¢
   - æ˜¾ç¤ºåŠ è½½çŠ¶æ€

2. **åˆ†é¡µåŠ è½½**
   - æ”¶è—å¤¹è¯¦æƒ…åˆ†é¡µæ˜¾ç¤ºèœè°±
   - ä½¿ç”¨ Paging 3

3. **å»¶è¿ŸåŠ è½½**
   - æ‡’åŠ è½½èœè°±å›¾ç‰‡
   - ä½¿ç”¨ Coil çš„å ä½å›¾

---

## æµ‹è¯•ç­–ç•¥

### å•å…ƒæµ‹è¯•

**FolderRepository æµ‹è¯•**:
- åˆ›å»ºæ”¶è—å¤¹
- æ›´æ–°æ”¶è—å¤¹
- åˆ é™¤æ”¶è—å¤¹
- æ”¶è—å¤¹æ’åº

**RecipeFolderRepository æµ‹è¯•**:
- æ”¶è—èœè°±åˆ°æ”¶è—å¤¹
- æ‰¹é‡æ”¶è—
- ä»æ”¶è—å¤¹ç§»é™¤èœè°±
- æŸ¥è¯¢æ”¶è—å¤¹ä¸­çš„èœè°±

### é›†æˆæµ‹è¯•

- æ”¶è—å¤¹å®Œæ•´æµç¨‹
- èœè°±æ”¶è—å®Œæ•´æµç¨‹
- åˆ é™¤æ”¶è—å¤¹æ—¶çš„å…³è”åˆ é™¤

### æµ‹è¯•è¦†ç›–ç‡ç›®æ ‡

- ä»£ç è¦†ç›–ç‡ï¼šâ‰¥ 70%
- æ ¸å¿ƒç®—æ³•è¦†ç›–ç‡ï¼šâ‰¥ 90%

---

## éƒ¨ç½²ç­–ç•¥

### æ•°æ®åº“è¿ç§»

```kotlin
val MIGRATION_16_1 = object : Migration(16, 1) {
    override fun migrate(database: SupportSQLiteDatabase) {
        // åˆ›å»º folders è¡¨
        database.execSQL("""
            CREATE TABLE IF NOT EXISTS folders (
                id TEXT PRIMARY KEY NOT NULL,
                name TEXT NOT NULL,
                icon TEXT,
                color TEXT,
                sortOrder INTEGER NOT NULL DEFAULT 0,
                isSystem INTEGER NOT NULL DEFAULT 0,
                createdAt INTEGER NOT NULL,
                updatedAt INTEGER NOT NULL
            )
        """)

        // åˆ›å»º recipe_folders è¡¨
        database.execSQL("""
            CREATE TABLE IF NOT EXISTS recipe_folders (
                id TEXT PRIMARY KEY NOT NULL,
                recipeId TEXT NOT NULL,
                folderId TEXT NOT NULL,
                addedAt INTEGER NOT NULL,
                FOREIGN KEY (recipeId) REFERENCES recipes(id) ON DELETE CASCADE,
                FOREIGN KEY (folderId) REFERENCES folders(id) ON DELETE CASCADE,
                UNIQUE (recipeId, folderId)
            )
        """)

        // åˆ›å»ºç´¢å¼•
        database.execSQL("""
            CREATE INDEX IF NOT EXISTS index_recipe_folders_recipeId
            ON recipe_folders(recipeId)
        """)

        database.execSQL("""
            CREATE INDEX IF NOT EXISTS index_recipe_folders_folderId
            ON recipe_folders(folderId)
        """)

        // åˆ›å»ºç³»ç»Ÿé»˜è®¤æ”¶è—å¤¹
        database.execSQL("""
            INSERT INTO folders (id, name, icon, color, sortOrder, isSystem, createdAt, updatedAt)
            VALUES (
                'default',
                'æˆ‘çš„æ”¶è—',
                'star',
                '#FFD700',
                0,
                1,
                ${System.currentTimeMillis()},
                ${System.currentTimeMillis()}
            )
        """)
    }
}
```

---

## å·²çŸ¥é—®é¢˜å’Œä¼˜åŒ–æ–¹å‘

### å·²çŸ¥é—®é¢˜

1. **æ”¶è—å¤¹åç§°å†²çª**
   - å½±å“ï¼šå¯èƒ½åˆ›å»ºåŒåæ”¶è—å¤¹
   - è§£å†³æ–¹æ¡ˆï¼šå…è®¸åŒåæ”¶è—å¤¹ï¼ˆç”¨æˆ·è‡ªç”±ï¼‰
   - æœªæ¥ä¼˜åŒ–ï¼šæç¤ºç”¨æˆ·é‡å‘½å

2. **èœè°±æ•°é‡æ›´æ–°å»¶è¿Ÿ**
   - å½±å“ï¼šæ”¶è—å¤¹è¯¦æƒ…çš„èœè°±æ•°é‡å¯èƒ½ä¸å‡†ç¡®
   - è§£å†³æ–¹æ¡ˆï¼šå®æ—¶æŸ¥è¯¢æˆ–å®šæœŸæ›´æ–°
   - æœªæ¥ä¼˜åŒ–ï¼šä½¿ç”¨è§¦å‘å™¨è‡ªåŠ¨æ›´æ–°

### ä¼˜åŒ–æ–¹å‘

1. **æ‹–æ‹½æ’åºä¼˜åŒ–**ï¼ˆä¼˜å…ˆçº§ P2ï¼‰
   - æ›´æµç•…çš„æ‹–æ‹½åŠ¨ç”»
   - æ”¯æŒæ‰¹é‡æ‹–æ‹½

2. **æ”¶è—å¤¹ç»Ÿè®¡**ï¼ˆä¼˜å…ˆçº§ P2ï¼‰
   - æ˜¾ç¤ºæ”¶è—å¤¹çš„åˆ›å»ºæ—¶é—´
   - æ˜¾ç¤ºæœ€è¿‘æ·»åŠ çš„èœè°±

3. **æ”¶è—å¤¹åˆ†äº«**ï¼ˆä¼˜å…ˆçº§ P2ï¼‰
   - åˆ†äº«æ”¶è—å¤¹ç»™å…¶ä»–ç”¨æˆ·
   - å¯¼å…¥æ”¶è—å¤¹

---

## å‚è€ƒèµ„æ–™

- [Room Database](https://developer.android.com/training/data-storage/room)
- [Jetpack Compose](https://developer.android.com/jetpack/compose)
- [Material Design 3](https://m3.material.io/)

---

**æ–‡æ¡£ç‰ˆæœ¬**: 1.0
**åˆ›å»ºæ—¥æœŸ**: 2026-02-20
**æœ€åæ›´æ–°**: 2026-02-20
**è´Ÿè´£äºº**: Jude ğŸ¦
