# Spec: 收藏分类管理

**Spec ID**: 016
**功能名称**: 收藏分类管理
**优先级**: P1
**状态**: 🚧 规划中
**创建日期**: 2026-02-20
**最后更新**: 2026-02-20

---

## What

### 功能描述

收藏分类管理允许用户创建收藏夹，将菜谱按类别收藏到不同的收藏夹中，方便快速访问和管理。

### 核心功能

#### 1. 收藏夹管理

**创建收藏夹**
- 输入收藏夹名称（2-20 字符）
- 选择图标（可选）
- 选择颜色（可选）
- 拖拽调整顺序

**编辑收藏夹**
- 修改收藏夹名称
- 更换图标和颜色
- 调整顺序
- 删除收藏夹（包含确认）

**系统默认收藏夹**
- ⭐ 我的收藏（系统默认，不可删除）

#### 2. 菜谱收藏

**收藏到收藏夹**
- 从菜谱详情页收藏
- 选择目标收藏夹（单选或多选）
- 可收藏到多个收藏夹

**批量收藏**
- 在菜谱列表批量选择菜谱
- 批量收藏到指定收藏夹

**取消收藏**
- 从收藏夹中移除菜谱
- 批量取消收藏

#### 3. 收藏夹浏览

**收藏夹列表**
- 显示所有收藏夹
- 显示每个收藏夹的菜谱数量
- 拖拽调整顺序
- 搜索收藏夹

**收藏夹详情**
- 显示收藏夹中的菜谱
- 支持排序（添加时间、菜名）
- 支持筛选（按难度、时间）
- 快速访问菜谱

### 用户场景

#### 场景1：创建"周末宴请"收藏夹

**触发条件**: 用户经常宴请朋友，需要快速找到适合的菜谱

**用户目标**: 将适合宴请的菜谱集中管理

**当前痛点**: 收藏的菜谱太多，难以快速找到适合宴请的

**解决方案**:
1. 进入"我的收藏"页面
2. 点击"创建收藏夹"
3. 输入名称"周末宴请"
4. 选择图标（🍽️）和颜色（红色）
5. 保存
6. 从菜谱列表选择适合宴请的菜谱
7. 收藏到"周末宴请"收藏夹

**成功标准**:
- 收藏夹创建成功
- 菜谱成功收藏到收藏夹
- 可以快速访问收藏夹中的菜谱

#### 场景2：按菜系分类收藏

**触发条件**: 用户喜欢按菜系管理菜谱

**用户目标**: 创建"川菜"、"粤菜"、"湘菜"等收藏夹

**当前痛点**: 无法按菜系分类查看收藏

**解决方案**:
1. 创建多个收藏夹（川菜、粤菜、湘菜等）
2. 为每个收藏夹选择不同的颜色和图标
3. 将菜谱收藏到对应的收藏夹
4. 通过收藏夹列表快速查找

**成功标准**:
- 可以创建多个收藏夹
- 收藏夹易于区分（颜色、图标）
- 可以快速按菜系查找菜谱

#### 场景3：批量收藏新发现的菜谱

**触发条件**: 用户浏览菜谱时发现多个想收藏的

**用户目标**: 一次性收藏多个菜谱到指定收藏夹

**当前痛点**: 逐个收藏太慢

**解决方案**:
1. 在菜谱列表进入选择模式
2. 勾选多个菜谱
3. 点击"收藏到收藏夹"
4. 选择目标收藏夹
5. 确认收藏

**成功标准**:
- 可以批量选择菜谱
- 可以批量收藏
- 操作快捷

---

## Why

### 业务价值

**对用户的价值**:
- 更好地组织收藏的菜谱
- 快速找到特定类型的菜谱
- 提升使用效率

**对产品的价值**:
- 提升收藏功能的使用价值
- 增加用户粘性
- 为个性化推荐提供数据支持

### 问题解决

**解决的核心问题**:
1. 收藏的菜谱太多，难以管理
2. 无法按类别快速查找收藏
3. 收藏功能使用率低

**不解决的问题**:
- 不提供云同步（由云端同步功能解决）
- 不提供智能分类（由 AI 推荐功能解决）

### 成功指标

**功能性指标**:
- 收藏夹创建成功率: ≥ 99%
- 菜谱收藏成功率: ≥ 99%
- 批量操作成功率: ≥ 99%

**性能指标**:
- 收藏夹列表加载: < 500ms
- 收藏夹详情加载: < 500ms
- 收藏操作响应: < 500ms

**用户体验指标**:
- 收藏夹使用率: ≥ 40%
- 批量收藏使用率: ≥ 20%
- 用户满意度: ≥ 4.0/5.0

---

## User Stories

### US-016-1: 作为用户，我想要创建收藏夹，以便分类管理收藏的菜谱

**验收标准**:
- [ ] 可以创建收藏夹
- [ ] 可以设置收藏夹名称（2-20 字符）
- [ ] 可以选择图标（可选）
- [ ] 可以选择颜色（可选）
- [ ] 创建成功后收藏夹出现在列表中

### US-016-2: 作为用户，我想要编辑收藏夹，以便修改名称和样式

**验收标准**:
- [ ] 可以修改收藏夹名称
- [ ] 可以更换图标
- [ ] 可以更换颜色
- [ ] 可以拖拽调整顺序
- [ ] 可以删除收藏夹（包含确认）

### US-016-3: 作为用户，我想要将菜谱收藏到收藏夹，以便按类别查找

**验收标准**:
- [ ] 可以从菜谱详情页收藏到收藏夹
- [ ] 可以选择目标收藏夹（单选或多选）
- [ ] 可以收藏到多个收藏夹
- [ ] 收藏成功后有提示

### US-016-4: 作为用户，我想要批量收藏菜谱，以便快速收藏多个菜谱

**验收标准**:
- [ ] 可以在菜谱列表进入选择模式
- [ ] 可以勾选多个菜谱
- [ ] 可以批量收藏到指定收藏夹
- [ ] 批量操作成功后有提示

### US-016-5: 作为用户，我想要浏览收藏夹，以便快速访问收藏的菜谱

**验收标准**:
- [ ] 可以查看收藏夹列表
- [ ] 可以看到每个收藏夹的菜谱数量
- [ ] 可以拖拽调整收藏夹顺序
- [ ] 可以搜索收藏夹
- [ ] 可以打开收藏夹查看菜谱

---

## Non-Functional Requirements

### 性能

| 指标 | 要求 | 说明 |
|------|------|------|
| 收藏夹列表加载 | < 500ms | 100个收藏夹以内 |
| 收藏夹详情加载 | < 500ms | 100个菜谱以内 |
| 收藏操作响应 | < 500ms | 包含数据库更新 |
| 批量收藏 | < 2s | 10个菜谱 |

### 可用性

| 指标 | 要求 | 说明 |
|------|------|------|
| 收藏夹创建成功率 | ≥ 99% | 无数据丢失 |
| 菜谱收藏成功率 | ≥ 99% | 无数据丢失 |
| 批量操作成功率 | ≥ 99% | 无数据丢失 |

### 兼容性

| 平台 | 最低版本 | 说明 |
|------|---------|------|
| Android | API 24 (Android 7.0) | 最小支持 |

---

## Constraints

### 技术约束

- **编程语言**: Kotlin 1.9+
- **数据库**: Room 2.6+
- **异步处理**: Coroutines + Flow
- **最低支持**: Android API 24

### 业务约束

- **收藏夹数量**: 单个用户最多 50 个收藏夹
- **收藏夹名称**: 2-20 字符
- **菜谱收藏**: 单个菜谱最多收藏到 10 个收藏夹

---

## Dependencies

### 依赖的其他功能

- **菜谱管理** (Spec 001): 需要菜谱数据
- **收藏功能** (Spec 001 部分实现): 需要基础收藏功能

### 被依赖的功能

- **智能推荐**: 基于收藏夹分析用户偏好
- **菜单规划**: 从收藏夹选择菜谱

---

## Out of Scope

### 不在本次实现的功能

- [ ] 智能分类推荐
- [ ] 收藏夹分享
- [ ] 收藏夹云同步
- [ ] 收藏夹导入导出

### 未来可能的功能

- 收藏夹分享（优先级 P2）
- 智能分类推荐（优先级 P2）

---

## Notes

### 设计决策

1. **为什么支持菜谱收藏到多个收藏夹？**
   - 用户可能按不同维度分类（菜系、难度、场景）
   - 增加灵活性

2. **为什么系统默认收藏夹不可删除？**
   - 保持基础功能可用性
   - 避免用户误删导致收藏丢失

3. **为什么限制收藏夹数量？**
   - 避免性能问题
   - 避免用户创建过多收藏夹导致混乱

### 已知问题

1. **收藏夹名称冲突**
   - 当前解决方案：允许同名收藏夹
   - 未来优化：提示用户重命名

---

## References

- [REQUIREMENTS.md](../../../docs/REQUIREMENTS.md)
- [ARCHITECTURE.md](../../../docs/ARCHITECTURE.md)
- [001-recipe-management/spec.md](../001-recipe-management/spec.md)

---

**文档版本**: 1.0
**创建日期**: 2026-02-20
**最后更新**: 2026-02-20
**负责人**: Jude 🦞
