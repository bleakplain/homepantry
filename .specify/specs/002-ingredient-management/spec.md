# Spec: 食材管理

**Spec ID**: 002
**功能名称**: 食材管理
**优先级**: P0
**状态**: ✅ 已实现
**创建日期**: 2026-02-15
**最后更新**: 2026-02-15

---

## What

### 功能描述

食材管理功能允许用户管理个人食材库，包括添加、编辑、删除食材，以及管理储藏室中的食材库存。支持按分类管理、搜索食材、设置保质期等功能。

### 核心功能

1. **食材库管理**
   - 添加食材（名称、单位、分类）
   - 编辑食材信息
   - 删除食材
   - 搜索食材

2. **储藏室库存**
   - 添加库存（数量、购买日期、保质期、存储位置）
   - 编辑库存（更新数量、保质期）
   - 删除库存
   - 查看库存列表

3. **保质期管理**
   - 查看即将到期的食材（N天内）
   - 查看已过期的食材
   - 按保质期排序

4. **存储位置管理**
   - 按存储位置查看（冷藏、冷冻、常温）
   - 统计各位置的食材数量

### 用户场景

#### 场景1：添加新食材

**触发条件**: 用户在超市买了一种新食材，想要添加到应用中

**用户目标**: 记录食材信息，方便日后使用

**当前痛点**: 记不住买了什么，容易重复购买

**解决方案**:
1. 点击"添加食材"按钮
2. 输入食材名称
3. 选择单位（克、毫升、个等）
4. 选择分类（蔬菜、水果、肉类等）
5. 点击保存

**成功标准**:
- 食材成功保存到数据库
- 可以在食材列表中找到该食材
- 食材信息完整、准确

#### 场景2：查看家里还有什么

**触发条件**: 用户想知道家里还有什么菜

**用户目标**: 查看现有食材，决定做什么菜

**当前痛点**: 食材散落各处，难以快速查看

**解决方案**:
1. 进入"储藏室"页面
2. 查看库存列表
3. 按存储位置查看（冷藏、冷冻、常温）
4. 查看即将到期的食材

**成功标准**:
- 可以看到所有库存
- 可以按位置筛选
- 可以看到保质期提醒

---

## Why

### 业务价值

**对用户的价值**:
- 统一管理食材，不再散落各处
- 查看库存，决定做什么菜
- 保质期提醒，减少浪费
- 避免重复购买

**对产品的价值**:
- 核心功能，是用户使用应用的重要原因
- 为智能推荐功能提供数据
- 为购物清单功能提供数据
- 提高用户粘性

### 问题解决

**解决的核心问题**:
1. 食材散落各处，难以管理
2. 不知道家里还有什么菜
3. 食材过期浪费
4. 重复购买

**不解决的问题**:
- 不自动推荐菜谱（由智能推荐功能解决）
- 不自动生成购物清单（由购物清单功能解决）

### 成功指标

**功能性指标**:
- 食材添加成功率: ≥ 99%
- 食材搜索准确率: ≥ 95%
- 保质期提醒准确率: ≥ 90%

**性能指标**:
- 食材列表加载时间: < 1s
- 食材搜索响应时间: < 1s
- 库存列表加载时间: < 1s

**用户体验指标**:
- 食材添加完成率: ≥ 80%
- 库存查看使用率: ≥ 60%
- 保质期提醒查看率: ≥ 40%

---

## User Stories

### US-001: 作为用户，我想要添加食材，以便管理我的食材库

**验收标准**:
- [ ] 可以输入食材名称
- [ ] 可以选择单位
- [ ] 可以选择分类
- [ ] 食材成功保存后，可以在食材列表中找到
- [ ] 食材信息完整、准确

### US-002: 作为用户，我想要查看库存，以便知道家里还有什么

**验收标准**:
- [ ] 可以查看所有库存
- [ ] 可以按存储位置筛选
- [ ] 可以查看保质期
- [ ] 可以看到即将到期的食材

### US-003: 作为用户，我想要设置保质期，以便减少食材浪费

**验收标准**:
- [ ] 可以为库存设置保质期
- [ ] 可以查看即将到期的食材（N天内）
- [ ] 可以查看已过期的食材
- [ ] 可以按保质期排序

---

## Non-Functional Requirements

### 性能

| 指标 | 要求 | 说明 |
|------|------|------|
| 食材列表加载 | < 1s | 1000个食材以内 |
| 食材搜索响应 | < 1s | 模糊匹配 |
| 库存列表加载 | < 1s | 1000个库存以内 |

### 可用性

| 指标 | 要求 | 说明 |
|------|------|------|
| 添加食材成功率 | ≥ 99% | 无数据丢失 |
| 搜索准确率 | ≥ 95% | 模糊匹配准确度 |
| 保质期提醒准确率 | ≥ 90% | 基于设置的保质期 |

### 兼容性

| 平台 | 最低版本 | 说明 |
|------|---------|------|
| Android | API 24 | 最小支持 |
| 屏幕尺寸 | 4英寸+ | 适配不同屏幕 |

---

## Constraints

### 技术约束

- **编程语言**: Kotlin 1.9+
- **UI 框架**: Jetpack Compose 1.5+
- **数据库**: Room 2.6+
- **最低支持**: Android API 24

### 业务约束

- **食材数量**: 单个用户最多 10,000 个食材
- **库存数量**: 单个用户最多 10,000 个库存
- **食材名称长度**: 1-50 字符

---

## Dependencies

### 依赖的其他功能

- **分类管理**: 食材需要关联分类
- **存储位置**: 库存需要关联存储位置

### 被依赖的功能

- **智能推荐**: 基于库存推荐菜谱
- **购物清单**: 根据库存生成购物清单

---

## Out of Scope

### 不在本次实现的功能

- [ ] AI 自动识别食材（从图片）
- [ ] 食材营养信息记录
- [ ] 食材价格记录

---

## References

- [REQUIREMENTS.md](../../../docs/REQUIREMENTS.md)
- [ARCHITECTURE.md](../../../docs/ARCHITECTURE.md)
- [Constitution](../memory/constitution.md)

---

**文档版本**: 1.0
**创建日期**: 2026-02-15
**最后更新**: 2026-02-15
**负责人**: Jude 🦞
