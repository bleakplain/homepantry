# Spec 004: 洋物清单

**Spec ID**: 004
**功能名称**: 洋物清单
**优先级**: P0
**状态**: ✅ 已实现
**创建日期**: 2026-02-15
**最后更新**: 2026-02-15

---

## 文档列表

| 文档 | 描述 | 字符数 |
|------|------|--------|
| [spec.md](./spec.md) | 需求规范（What + Why） | 1,725 |
| [plan.md](./plan.md) | 技术方案（技术栈 + 架构） | 3,183 |
| [data-model.md](./data-model.md) | 数据模型（实体定义） | 2,925 |
| [tasks.md](./tasks.md) | 任务清单（实现步骤） | 3,064 |
| [research.md](./research.md) | 技术调研（选型 + 问题） | 1,373 |
| **总计** | - | **12,270** |

---

## 核心内容

### What（做什么）

**核心功能**:
1. **购物清单管理**: 添加、编辑、删除购物清单
2. **购物项管理**: 添加、编辑、删除、勾选购物项
3. **智能合并**: 合并相同食材，累加数量
4. **分类整理**: 按超市区域分类整理
5. **价格记录**: 记录购买价格，积累数据

### Why（为什么）

**对用户的价值**:
- 自动汇总所需食材，节省时间
- 智能合并数量，避免重复
- 分类整理，购物更高效
- 价格记录，了解消费

**对产品的价值**:
- 核心功能，与菜单规划紧密集成
- 为数据统计提供数据
- 提高用户粘性

---

## 技术实现

### 技术栈

| 技术 | 版本 | 用途 |
|------|------|------|
| Kotlin | 1.9+ | 开发语言 |
| Jetpack Compose | 1.5+ | UI 框架 |
| Room | 2.6+ | 本地数据库 |

---

## 数据模型

### 核心实体

1. **ShoppingList（购物清单）**
   - id, name, date, items, estimatedCost, actualCost

2. **ShoppingItem（购物项）**
   - id, listId, name, quantity, unit, category, price, isChecked

---

## 实现状态

### 已完成（✅）

**数据层**:
- ShoppingList Entity
- ShoppingItem Entity
- ShoppingListDao（18 个方法）

**业务逻辑层**:
- ShoppingListRepository（10 个方法）

**表现层**:
- ShoppingListScreen

---

## 验收标准

### 功能验收

- [x] 可以添加购物清单
- [x] 可以添加购物项
- [x] 可以编辑购物项
- [x] 可以删除购物项
- [x] 可以勾选已购买

### 性能验收

- [x] 购物清单加载时间 < 1s
- [x] 购物项添加时间 < 1s

---

## 已知问题和优化方向

### 已知问题

1. **智能合并准确性**
   - 当前：简单按名称合并
   - 未来：考虑单位差异

---

## 参考资料

- [spec.md](./spec.md)
- [plan.md](./plan.md)
- [REQUIREMENTS.md](../../../docs/REQUIREMENTS.md)
- [Constitution](../memory/constitution.md)

---

**文档版本**: 1.0
**创建日期**: 2026-02-15
**最后更新**: 2026-02-15
**负责人**: Jude 🦞
