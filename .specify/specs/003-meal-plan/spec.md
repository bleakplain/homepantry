# Spec: 餐食计划

**Spec ID**: 003
**功能名称**: 餐食计划
**优先级**: P0
**状态**: ✅ 已实现
**创建日期**: 2026-02-15
**最后更新**: 2026-02-15

---

## What

### 功能描述

餐食计划功能允许用户规划每日餐食，包括早餐、午餐、晚餐和加餐。支持按日期查看、按周查看、复制餐食计划、自动生成购物清单等功能。

### 核心功能

1. **每日餐食规划**
   - 添加餐食计划（日期、餐次、菜谱、份量）
   - 编辑餐食计划
   - 删除餐食计划
   - 查看每日餐食

2. **周视图餐食计划**
   - 查看一周的餐食计划
   - 按周查看和规划
   - 快速浏览和调整

3. **智能菜单生成**
   - 自动生成一周菜单
   - 提供多个方案选择
   - 考虑营养均衡和口味多样性

4. **复制餐食计划**
   - 复制单天到另一天
   - 复制一周到另一周
   - 批量操作

5. **购物清单集成**
   - 根据餐食计划生成购物清单
   - 自动汇总所需食材
   - 智能合并数量

### 用户场景

#### 场景1：规划今天的餐食

**触发条件**: 用户想知道今天吃什么

**用户目标**: 快速添加今天的餐食计划

**当前痛点**: 每天临时决定，不知道吃什么

**解决方案**:
1. 进入"餐食计划"页面
2. 选择今天
3. 添加早餐、午餐、晚餐
4. 保存

**成功标准**:
- 餐食计划成功保存
- 可以在日历中查看
- 可以根据餐食计划生成购物清单

#### 场景2：规划下周的餐食

**触发条件**: 周末规划下周工作日的餐食

**用户目标**: 快速生成下周菜单，可微调

**当前痛点**: 需要逐个添加，耗时耗力

**解决方案**:
1. 进入"周菜单生成"功能
2. 选择时间范围（下周一到周五）
3. 设定条件（时间限制、营养要求）
4. AI 生成 2-3 套方案
5. 选择方案并微调
6. 保存

**成功标准**:
- 快速生成菜单
- 可自由微调
- 符合营养均衡要求

---

## Why

### 业务价值

**对用户的价值**:
- 规划餐食，不再临时决定
- 节省时间，批量规划
- 营养均衡，自动考虑
- 自动生成购物清单

**对产品的价值**:
- 核心功能，是用户使用应用的重要原因
- 为购物清单功能提供数据
- 提高用户粘性

### 问题解决

**解决的核心问题**:
1. 不知道每天吃什么
2. 规划餐食耗时耗力
3. 餐食不均衡
4. 临时决定容易重复

**不解决的问题**:
- 不自动推荐菜谱（由智能推荐功能解决）
- 不自动计算营养信息（由营养分析功能解决）

### 成功指标

**功能性指标**:
- 餐食计划添加成功率: ≥ 99%
- 智能菜单生成准确率: ≥ 90%
- 购物清单生成准确率: ≥ 95%

**性能指标**:
- 餐食计划加载时间: < 1s
- 智能菜单生成时间: < 5s
- 购物清单生成时间: < 3s

**用户体验指标**:
- 每日计划使用率: ≥ 70%
- 周菜单生成使用率: ≥ 50%
- 购物清单生成使用率: ≥ 60%

---

## User Stories

### US-001: 作为用户，我想要添加餐食计划，以便规划每日餐食

**验收标准**:
- [ ] 可以选择日期
- [ ] 可以选择餐次（早餐、午餐、晚餐、加餐）
- [ ] 可以选择菜谱
- [ ] 可以设置份量
- [ ] 可以添加备注
- [ ] 餐食计划成功保存

### US-002: 作为用户，我想要查看周菜单，以便规划下周餐食

**验收标准**:
- [ ] 可以按周查看
- [ ] 可以快速浏览一周的餐食
- [ ] 可以调整单日的餐食
- [ ] 可以复制一周到另一周

### US-003: 作为用户，我想要生成周菜单，以便快速规划下周

**验收标准**:
- [ ] 可以选择时间范围
- [ ] 可以设定条件（时间、营养）
- [ ] 可以生成多个方案
- [ ] 可以自由微调
- [ ] 可以保存

---

## Non-Functional Requirements

### 性能

| 指标 | 要求 | 说明 |
|------|------|------|
| 餐食计划加载 | < 1s | 1000 个餐食计划以内 |
| 智能菜单生成 | < 5s | 生成一周菜单 |
| 购物清单生成 | < 3s | 一周菜单 |

### 可用性

| 指标 | 要求 | 说明 |
|------|------|------|
| 添加餐食计划成功率 | ≥ 99% | 无数据丢失 |
| 智能菜单生成准确率 | ≥ 90% | 符合营养均衡要求 |
| 购物清单生成准确率 | ≥ 95% | 食材数量正确 |

### 兼容性

| 平台 | 最低版本 | 说明 |
|------|---------|------|
| Android | API 24 | 最小支持 |
| 屏幕尺寸 | 4英寸+ | 适配不同屏幕 |

---

## Constraints

### 技术约束

- **编程语言**: Kotlin 1.9+
- **UI 框架**: Jetpack Compose 1.5+
- **数据库**: Room 2.6+
- **最低支持**: Android API 24

### 业务约束

- **餐食计划数量**: 单个用户最多 10,000 个
- **周菜单数量**: 单个用户最多 100 个
- **复制次数**: 限制批量操作次数

---

## Dependencies

### 依赖的其他功能

- **菜谱管理**: 餐食计划需要关联菜谱
- **购物清单**: 根据餐食计划生成购物清单

### 被依赖的功能

- **智能推荐**: 基于餐食计划推荐菜谱
- **营养分析**: 分析餐食计划的营养均衡

---

## Out of Scope

### 不在本次实现的功能

- [ ] 宴请模式（单独功能）
- [ ] 家庭成员共享
- [ ] 自动营养计算
- [ ] 菜谱评分和评论

---

## References

- [REQUIREMENTS.md](../../../docs/REQUIREMENTS.md)
- [ARCHITECTURE.md](../../../docs/ARCHITECTURE.md)
- [Constitution](../memory/constitution.md)

---

**文档版本**: 1.0
**创建日期**: 2026-02-15
**最后更新**: 2026-02-15
**负责人**: Jude 🦞
